<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Feed ‚Äî Muniverse</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet" />
</head>
<body>
  <header class="topbar">
    <a class="logo" href="{{ url_for('onboarding') }}">üåç <span>Muniverse</span></a>
    <nav class="nav">
      <a href="{{ url_for('feed') }}">Home</a>
      <a href="{{ url_for('explore') }}">Explore</a>
      <a href="{{ url_for('conferences') }}">Conferences</a>
      <a href="{{ url_for('about') }}">About</a>

      {% if current_user %}
        <a href="{{ url_for('profile', username=current_user.username) }}" class="avatar-link" title="@{{ current_user.username }}">
          <img class="avatar-circle" src="{{ url_for('static', filename=current_user.profile_pic) }}" alt="{{ current_user.username }}">
        </a>
        <a class="btn-ghost" href="{{ url_for('logout') }}">Sign out</a>
      {% else %}
        <a class="btn" href="{{ url_for('login') }}">Sign in</a>
        <a class="btn btn-primary" href="{{ url_for('signup') }}">Create profile</a>
      {% endif %}
    </nav>
  </header>

  <main class="container">
    {% if posts|length == 0 %}
      <div class="empty card">
        <h3>No posts yet</h3>
        <p>Be the first to share an update with the community.</p>
        <a class="btn btn-primary" href="{{ url_for('addpost') }}">Create a Post</a>
      </div>
    {% else %}
      <div class="feed-list">
        {% for post in posts %}
          <article class="post card">
            <header class="post-head">
              <div class="avatar-letter" data-letter="{{ post.username[0]|upper }}"></div>
              <a class="username" href="{{ url_for('profile', username=post.username) }}">@{{ post.username }}</a>
            </header>

            <div class="post-media">
              <img src="{{ url_for('static', filename=post.image) }}" alt="Post image by @{{ post.username }}" loading="lazy" />
            </div>

            <div class="post-body">
              <p class="caption">{{ post.caption }}</p>
              <div class="meta">
                <span>‚ù§Ô∏è {{ post.likes }}</span>
                <a href="{{ url_for('post', post_id=post.id) }}">üí¨ {{ post.comments|length }} comments</a>
              </div>
            </div>
          </article>
        {% endfor %}
      </div>
    {% endif %}
  </main>
</body>
</html>
